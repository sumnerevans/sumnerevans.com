@import 'variables';

@mixin dark-mode-styles {
  color: $foreground-dark-mode;
  background: $background-dark-mode;

  header {
    .name-and-subtitle .site-title {
      color: $foreground-dark-mode;
    }

    #search-container {
      .search input {
        background-color: #1a1a1a;
        border: 1px solid #000;
        color: #eee;
      }

      .search-results {
        a {
          color: #eee;

          &:hover, &:active {
            color: #eee;
          }
        }

        li:hover, li:active {
          border-color: #84b4ff;
        }
      }
    }
  }

  header, footer {
    border-color: $foreground-dark-mode;
  }

  a {
    color: #84b4ff;

    &:hover, &:active, &:focus {
      color: lighten(#84b4ff, 10%);
    }

    &.disabled {
      text-decoration: none;
      color: gray;
    }
  }

  a.btn {
    background-color: $foreground-dark-mode;
    color: $background-dark-mode;
    padding: 10px;
    border-radius: 5px;
    text-decoration: none;

    &:hover, &:active, &:focus {
      background-color: #fff;
      color: #000;
    }
  }

  .admonition  a {
    color: lighten(#84b4ff, 10%);

    &:hover, &:active, &:focus {
      color: lighten(#84b4ff, 20%);
    }
  }

  img {
    opacity: 0.7;

    &:hover, &:active, &:focus {
      opacity: 1;
    }
  }

  main *:not(pre) > code,
  kbd,
  tt {
    background-color: #ffffff18;
  }

  figure {
    background-color: #ffffff18;
  }

  .webring .articles .article,
  .related-posts .articles .article {
    background-color: #202020;
  }

  section#isso-thread {
    .auth-section p.input-wrapper input,
    .notification-section input {
      background: #111;
      color: #eee;
    }

    >h4 {
      color: #eee;
    }

    .isso-postbox > .form-wrapper {
      div.textarea {
        background: #111;
      }

      .preview {
        background: repeating-linear-gradient(
          -45deg,
          #0a0a0a, #0a0a0a 10px,
          #111 10px, #111 20px
        );
      }
    }

    .isso-comment > div.text-wrapper {
      > .isso-comment-header {
        .author {
          color: #eee;
        }

        .spacer, a.permalink, .note, a.parent {
          color: #aaa;

          &:hover {
            color: #eee;
          }
        }
      }

      > .isso-comment-footer a:hover {
        // Unfortunately, Isso uses a lot of !important in its styles, so I
        // have to override that.
        text-shadow: #222 0 0 1px !important;
      }
    }

    .post-action input {
      background-color: #111;
      color: #eee;
    }
  }

  // Dark mode admonitions
  .admonition {
    // Default to note look.
    border: 1px solid $admonition-note-color-dark-theme;
    color: $admonition-note-color-dark-theme;
    background-color: $admonition-note-bg-color-dark-theme;

    // Specifics for each type of admonition
    &.attention {
      border: 1px solid $admonition-attention-color-dark-theme;
      color: $admonition-attention-color-dark-theme;
      background-color: $admonition-attention-bg-color-dark-theme;
    }

    &.caution {
      border: 1px solid $admonition-caution-color-dark-theme;
      color: $admonition-caution-color-dark-theme;
      background-color: $admonition-caution-bg-color-dark-theme;
    }

    &.danger {
      border: 1px solid $admonition-danger-color-dark-theme;
      color: $admonition-danger-color-dark-theme;
      background-color: $admonition-danger-bg-color-dark-theme;
    }

    &.error {
      border: 1px solid $admonition-error-color-dark-theme;
      color: $admonition-error-color-dark-theme;
      background-color: $admonition-error-bg-color-dark-theme;
    }

    &.hint {
      border: 1px solid $admonition-hint-color-dark-theme;
      color: $admonition-hint-color-dark-theme;
      background-color: $admonition-hint-bg-color-dark-theme;
    }

    &.important {
      border: 1px solid $admonition-important-color-dark-theme;
      color: $admonition-important-color-dark-theme;
      background-color: $admonition-important-bg-color-dark-theme;
    }

    &.tip {
      border: 1px solid $admonition-tip-color-dark-theme;
      color: $admonition-tip-color-dark-theme;
      background-color: $admonition-tip-bg-color-dark-theme;
    }

    &.warning {
      border: 1px solid $admonition-warning-color-dark-theme;
      color: $admonition-warning-color-dark-theme;
      background-color: $admonition-warning-bg-color-dark-theme;
    }

    &.definition {
      border: 1px solid $admonition-definition-color-dark-theme;
      color: $admonition-definition-color-dark-theme;
      background-color: $admonition-definition-bg-color-dark-theme;
    }
  }

  table:not(.gallery) {
    thead {
      tr {
        border-bottom: 1px solid white;
      }
    }

    tbody {
      tr {
        &:nth-child(odd) {
          background-color: #444;
        }
      }
    }

    th, td {
      &.border-right {
        border-right: 1px solid white;
      }
    }
  }

  // TODO START move to custom
  details.youtube-expander > summary,
  details.portfolio-item > summary {
    background-color: #202020;
  }
  // TODO END move to custom
}
